<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zipinfo.project.board.model.mapper.BoardMapper">

  <resultMap id="BoardResultMap" type="com.zipinfo.project.board.model.dto.Board">
    <id property="boardNo" column="BOARD_NO" />
    <result property="boardTitle" column="BOARD_TITLE" />
    <result property="boardContent" column="BOARD_CONTENT" />
    <result property="boardWriteDate" column="BOARD_WRITE_DATE" />
    <result property="readCount" column="READ_COUNT" />
    <result property="boardDelFl" column="BOARD_DEL_FL" />
    <result property="memberNo" column="MEMBER_NO" />
    <result property="townNo" column="TOWN_NO" />
    <result property="boardSubject" column="BOARD_SUBJECT" />
  </resultMap>

  <select id="selectNoticeList" resultMap="BoardResultMap">
    SELECT * FROM BOARD
    WHERE BOARD_DEL_FL = 'N' AND BOARD_SUBJECT = 'Q'
    ORDER BY BOARD_WRITE_DATE DESC
  </select>

  <select id="selectNotice" parameterType="int" resultMap="BoardResultMap">
    SELECT * FROM BOARD WHERE BOARD_NO = #{boardNo} AND BOARD_DEL_FL = 'N'
  </select>

  <insert id="insertNotice" parameterType="com.zipinfo.project.board.model.dto.Board" useGeneratedKeys="true" keyProperty="boardNo">
    INSERT INTO BOARD (BOARD_TITLE, BOARD_CONTENT, MEMBER_NO, TOWN_NO, BOARD_SUBJECT)
    VALUES (#{boardTitle}, #{boardContent}, #{memberNo}, #{townNo}, #{boardSubject})
  </insert>

  <update id="updateNotice" parameterType="com.zipinfo.project.board.model.dto.Board">
    UPDATE BOARD
    SET BOARD_TITLE = #{boardTitle},
        BOARD_CONTENT = #{boardContent}
    WHERE BOARD_NO = #{boardNo}
  </update>

  <update id="deleteNotice" parameterType="int">
    UPDATE BOARD
    SET BOARD_DEL_FL = 'Y'
    WHERE BOARD_NO = #{boardNo}
  </update>

</mapper>
