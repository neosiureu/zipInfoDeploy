<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zipinfo.project.myPage.model.mapper.MyPageMapper">

	<select id="getMemberInfo">
		SELECT MEMBER_NAME, MEMBER_NICKNAME, MEMBER_EMAIL, MEMBER_AUTH <if test="memberAuth eq 3">, COMPANY_NAME, COMPANY_LOCATION, PRESIDENT_NAME, BROKER_NO, PRESIDENT_PHONE</if>
		FROM MEMBER M
		<if test="memberAuth eq 3">
		JOIN BROKER_INFO B USING(MEMBER_NO)
		</if>
		WHERE MEMBER_NO = #{memberNo}
	</select>

	<update id="updateNormalInfo">
		UPDATE "MEMBER" SET
		MEMBER_NICKNAME = #{memberNickname}
		WHERE MEMBER_NO = #{memberNo}
	</update>

	<update id="updateBrokerInfo">
		UPDATE "BROKER_INFO" SET
		COMPANY_NAME = #{companyName},
		COMPANY_LOCATION = #{companyLocation},
		PRESIDENT_NAME = #{presidentName},
		BROKER_NO = #{brokerNo},
		PRESIDENT_PHONE = #{presidentPhone}
		WHERE MEMBER_NO = #{memberNo}
	</update>
	
	<select id="getMemberPassword">
		SELECT MEMBER_PW FROM "MEMBER"
		WHERE MEMBER_NO = #{memberNo}
	</select>
	
	<update id="updatePassword">
		UPDATE "MEMBER" SET
		MEMBER_PW = #{memberPw}
		WHERE MEMBER_NO = #{memberNo}
	</update>
</mapper>
