<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="com.zipinfo.project.member.model.mapper.MemberMapper">
<select id="login"> SELECT MEMBER_NO, MEMBER_EMAIL , MEMBER_NICKNAME, MEMBER_PW, MEMBER_NAME, MEMBER_AUTH
FROM MEMBER WHERE MEMBER_EMAIL = #{memberEmail} 
AND MEMBER_DEL_FL ='N' </select>

<select id="checkEmail"> SELECT COUNT(*)
	FROM "MEMBER"
	WHERE MEMBER_EMAIL = #{memberEmail}
	AND MEMBER_DEL_FL = 'N'
	 </select>
<select id="checkNickname">
  	SELECT COUNT(*)
  	FROM "MEMBER"
  	WHERE MEMBER_NICKNAME = #{checkNickname}
  	</select>

<select id="checkBrokerNo">
  SELECT COUNT(*)
  FROM BROKER_INFO bi
  WHERE bi.BROKER_NO = #{brokerNo}
</select>


<insert id="signupGeneral" >
  	 INSERT INTO "MEMBER"
     VALUES(SEQ_MEMBER.NEXTVAL, 
			 #{memberEmail},
			 #{memberPw},
			 DEFAULT,
			 DEFAULT,
			 DEFAULT,
			 #{memberLogin},
			 #{memberNickname},
			 #{memberName},
			 1,
			 DEFAULT,
			 #{memberLocation}			 
                    )
  	</insert>


<insert id="signupBroker" >
  	 INSERT INTO "BROKER_INFO"
     VALUES(SEQ_MEMBER.CURRVAL, 
			 #{companyLocation},
			 #{companyName},
			 #{presidentName},
			 #{brokerNo},
			 #{presidentPhone}			 
			 			 
                    )
  	</insert>

</mapper>
