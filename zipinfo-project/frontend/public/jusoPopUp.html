<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>주소 API 연동</title>
  <form id="form" name="form" method="post">
    <input type="hidden" id="confmKey" name="confmKey" value="devU01TX0FVVEgyMDI1MDYyMzEzNDgwNDExNTg2OTM="/>
    <input type="hidden" id="returnUrl" name="returnUrl"/>
    <input type="hidden" id="resultType" name="resultType" value="4" />
  </form>
  <script>
    function getParameterByName(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name) || "";
    }
    
    function init() {
      const inputYn = getParameterByName("inputYn");

      if (inputYn === "N") {
        const form = document.getElementById("form");
        form.returnUrl.value = window.location.origin + "/jusoPopUp.html"; 
        form.action = "https://business.juso.go.kr/addrlink/addrLinkUrl.do";
        form.submit();
      } else {
        if (window.opener && typeof window.opener.jusoCallBack === "function") {
          window.opener.jusoCallBack(
            getParameterByName("roadFullAddr"),
            getParameterByName("roadAddrPart1"),
            getParameterByName("addrDetail"),
            getParameterByName("roadAddrPart2"),
            getParameterByName("zipNo"),
            getParameterByName("admCd")
          );
        } else {
          console.warn("opener or jusoCallBack not available");
        }

        window.close();
      }
    }

    window.onload = init;
  </script>
</head>
<body>
</body>
</html>
